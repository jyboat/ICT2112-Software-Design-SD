@using ClearCare 
@using System.Text.Json
@{
    ViewData["Title"] = "Drug Interaction Checker";
}
@model DrugInteractionResponse

<div class="container py-4">
    <h1 class="mb-4">Drug Checker</h1>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success">@TempData["SuccessMessage"]</div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
    }

    <form class = "mb-5 px-2" asp-action="Add" method="post">
        <div class = "flex" style = "display: flex !important;">
            <div class="mb-3 w-50 pe-2">
                <label for="drugName" class="form-label">Drug Name</label>
                <input type="text" class="form-control" id="drugName1" name="drugName1" required>
            </div>

            <div class="mb-1 w-50 ps-2">
                <label for="drugName2" class="form-label">Drug Name 2</label>
                <input type="text" class="form-control" id="drugName2" name="drugName2" required>
            </div>
        </div>

            <button type="submit" class="btn btn-primary mb-3">Retrieve Interaction</button>
             <a asp-action="Add" class="btn btn-primary mb-3">Log Interactions</a>

           

        @if (Model?.Results != null && Model.Results.Count > 0)
        {
            @foreach (var interaction in Model.Results)
            {
                var isNoInteraction = interaction.Interaction.Trim().ToLower() == "no known interaction";
                var cardClass = isNoInteraction ? "bg-danger text-white" : "bg-light";

                <div class="card shadow-sm mb-3 w-100 px-2 @cardClass">
                    <div class="card-body">
                        <h5 class="card-title">@interaction.Drug1Name & <span class="text-danger">@interaction.Drug2Name</span></h5>
                        <p class="card-text">@interaction.Interaction</p>
                    </div>
                </div>
            }
        }
        else
        {
            <p>No interactions found.</p>
        }

        </form>

</div>
