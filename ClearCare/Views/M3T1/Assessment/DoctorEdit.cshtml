@model ClearCare.Models.Entities.M3T1.Assessment

<h2>Doctor Assessment Edit</h2>

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">
        @TempData["ErrorMessage"]
    </div>
}

<form asp-controller="Assessment" asp-action="updateDoctorAssessment" asp-route-assessmentId="@Model.getId()" method="post">
    <input type="hidden" name="id" value="@Model.getId()" />
    
    <div class="form-group">
        <label>Patient ID:</label>
        <input type="text" class="form-control" value="P01" readonly />
    </div>
    
    <div class="form-group">
        <label for="riskLevel">Risk Level (1-5):</label>
        <select class="form-control" id="riskLevel" name="riskLevel" required>
            <option value="">Select Risk Level</option>
            <option value="1" selected="@(Model.getRiskLevel() == "1")">1 - Minimal Risk</option>
            <option value="2" selected="@(Model.getRiskLevel() == "2")">2 - Low Risk</option>
            <option value="3" selected="@(Model.getRiskLevel() == "3")">3 - Moderate Risk</option>
            <option value="4" selected="@(Model.getRiskLevel() == "4")">4 - High Risk</option>
            <option value="5" selected="@(Model.getRiskLevel() == "5")">5 - Severe Risk</option>
        </select>
    </div>
    
    <div class="form-group">
        <label for="recommendation">Recommendation:</label>
        <textarea class="form-control" id="recommendation" name="recommendation" rows="3" required>@Model.getRecommendation()</textarea>
    </div>
    
    <h4>Checklist</h4>
    @foreach (var item in ViewBag.ChecklistItems as Dictionary<string, bool>)
    {
        <div class="form-check">
            <input class="form-check-input" type="checkbox" 
                   id="checklist_@item.Key" name="checklist[@item.Key]" 
                   value="true" @(item.Value ? "checked" : "")>
            <label class="form-check-label" for="checklist_@item.Key">
                @item.Key
            </label>
        </div>
    }
    
    <button type="submit" class="btn btn-primary mt-3">Save Changes</button>
    <a asp-action="List" class="btn btn-secondary mt-3">Cancel</a>
</form>