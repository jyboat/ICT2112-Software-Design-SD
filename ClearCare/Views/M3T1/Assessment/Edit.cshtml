@model ClearCare.Models.Entities.M3T1.Assessment

@{
    ViewData["Title"] = "Analyze risks";
    var assessment = Model.getAssessmentDetails();
}


<section class="container">
    <h2 class="mb-2">Doctor Assessment Edit</h2>

    <form asp-controller="Assessment" asp-action="updateDoctorAssessment" asp-route-assessmentId="@assessment["Id"]" method="post">
        <input type="hidden" name="id" value="@assessment["Id"]" />

        <!-- Hazard Type Selection -->
        <div class="form-group">
            <label for="hazardType">Hazard Type</label>
            <select class="form-control" id="hazardType" name="hazardType" required>
                <option value="">-- Select Hazard Type --</option>
                <option value="Fire Safety">Fire Safety</option>
                <option value="Fall Risk">Fall Risk</option>
                <option value="Wet Condition">Wet Condition</option>
            </select>
        </div>


        <div class="form-group">
            <label for="riskLevel">Risk Level (1-5):</label>
            <select class="form-control" id="riskLevel" name="riskLevel" required>
                <option value="">Select Risk Level</option>
                <option value="1" selected="@(assessment["RiskLevel"].ToString() == "1")">1 - Minimal Risk</option>
                <option value="2" selected="@(assessment["RiskLevel"].ToString() == "2")">2 - Low Risk</option>
                <option value="3" selected="@(assessment["RiskLevel"].ToString() == "3")">3 - Moderate Risk</option>
                <option value="4" selected="@(assessment["RiskLevel"].ToString() == "4")">4 - High Risk</option>
                <option value="5" selected="@(assessment["RiskLevel"].ToString() == "5")">5 - Severe Risk</option>
            </select>
        </div>

        <div class="form-group">
            <label for="recommendation">Recommendation:</label>
            <textarea class="form-control" id="recommendation" name="recommendation" rows="3" required>@assessment["Recommendation"]</textarea>
        </div>

        <h4>Checklist</h4>
        @foreach (var item in ViewBag.ChecklistItems as Dictionary<string, bool>)
        {
            <div class="form-check">
                <input class="form-check-input" type="checkbox"
                       id="checklist_@item.Key" name="checklist[@item.Key]"
                       value="true" @(item.Value ? "checked" : "")>
                <label class="form-check-label" for="checklist_@item.Key">
                    @item.Key
                </label>
            </div>
        }

        <button type="submit" class="btn btn-success mt-3">Submit analysis</button>
        <a asp-action="List" class="btn btn-danger mt-3">Cancel</a>
    </form>
</section>
